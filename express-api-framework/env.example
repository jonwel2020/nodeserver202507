# =================================================================
# 企业级 Node.js + Express + MySQL 后端API框架环境配置
# =================================================================
# 复制此文件为 .env 并根据实际环境修改配置值
# 注意：生产环境请使用强密码和安全的配置

# =================================================================
# 服务器配置
# =================================================================
PORT=3000
NODE_ENV=development
API_PREFIX=/api
HOST=0.0.0.0
APP_NAME=express-api-framework

# =================================================================
# 数据库配置（MySQL）
# =================================================================
DB_HOST=localhost
DB_PORT=3306
DB_NAME=express_api_db
DB_USER=root
DB_PASSWORD=password
DB_CONNECTION_LIMIT=10
DB_READ_HOST=localhost
DB_WRITE_HOST=localhost

# =================================================================
# Redis配置
# =================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =================================================================
# JWT配置（小程序端）
# =================================================================
JWT_SECRET=your-super-secret-jwt-key-for-api-endpoint-change-this-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=7d

# =================================================================
# 管理端JWT配置
# =================================================================
ADMIN_JWT_SECRET=your-admin-secret-key-change-this-in-production
ADMIN_JWT_EXPIRES_IN=2h
ADMIN_ALLOWED_IPS=127.0.0.1,::1

# =================================================================
# 邮件服务配置
# =================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
MAIL_FROM_NAME=API Framework
MAIL_FROM_EMAIL=noreply@yourdomain.com

# =================================================================
# 文件上传配置
# =================================================================
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,txt

# =================================================================
# 日志配置
# =================================================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_ERROR_FILE=./logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_CONSOLE=true

# =================================================================
# 限流配置
# =================================================================
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100
API_RATE_LIMIT_MAX_REQUESTS=1000
ADMIN_RATE_LIMIT_MAX_REQUESTS=200
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# =================================================================
# 安全配置
# =================================================================
BCRYPT_ROUNDS=12
SESSION_SECRET=your-session-secret-change-this-in-production
CORS_ORIGIN=*
TRUST_PROXY=false

# =================================================================
# 缓存配置
# =================================================================
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600

# =================================================================
# 第三方服务配置
# =================================================================
# 微信小程序
WECHAT_APP_ID=
WECHAT_APP_SECRET=

# 短信服务
SMS_ACCESS_KEY=
SMS_SECRET_KEY=

# =================================================================
# 定时任务配置
# =================================================================
CRON_ENABLED=true
CLEANUP_EXPIRED_TOKENS_CRON=0 2 * * *

# =================================================================
# 监控配置
# =================================================================
HEALTH_CHECK_PATH=/health
METRICS_PATH=/metrics
SLOW_QUERY_THRESHOLD=1000 